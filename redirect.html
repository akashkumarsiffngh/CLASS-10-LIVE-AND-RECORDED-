<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
</head>
<body>
  <h2>Checking schedule...</h2>
  <script>
    const now = new Date();
    const day = now.getDay(); // 0 = Sunday
    const hours = now.getHours();
    const minutes = now.getMinutes();

    const encoded = new URLSearchParams(window.location.search).get('q');
    const id = new URLSearchParams(window.location.search).get('id');

    function inRange(startHour, startMin, endHour, endMin) {
      const nowMins = hours * 60 + minutes;
      const startMins = startHour * 60 + startMin;
      const endMins = endHour * 60 + endMin;
      return nowMins >= startMins && nowMins <= endMins;
    }

    if (day === 0) {
      document.body.innerHTML = "<h2>Sunday is a holiday. No live class today!</h2>";
    } else if (encoded) {
      const url = atob(encoded);
      
      // Link 1 (5:00 PM – 6:35 PM)
      if (url.includes("4dacc3cc62ed4047b817b91580e11584")) {
        if (inRange(17, 0, 18, 35)) {
          window.location.href = `https://rolexcoderz.netlify.app/playx/?url=${encodeURIComponent(url)}&id=${id}`;
        } else {
          document.body.innerHTML = "<h2>Live 1 is only available from 5:00 PM to 6:35 PM.</h2>";
        }
      }
      // Link 2 (7:55 PM – 9:35 PM)
      else if (url.includes("287810d967cc428e9bd992002e55b72c")) {
        if (inRange(19, 55, 21, 35)) {
          window.location.href = `https://rolexcoderz.netlify.app/playx/?url=${encodeURIComponent(url)}&id=${id}`;
        } else {
          document.body.innerHTML = "<h2>Live 2 is only available from 7:55 PM to 9:35 PM.</h2>";
        }
      } else {
        document.body.innerHTML = "<h2>Unknown or unauthorized link.</h2>";
      }
    } else {
      document.body.innerHTML = "<h2>Invalid link.</h2>";
    }
  </script>
</body>
</html>